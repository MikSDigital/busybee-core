{# src/General/SystemBundle/Resources/views/Update/index_content.html.twig #}

{% trans_default_domain 'SystemBundle' %}

{% include '@BusybeeForm/Page/panelStart.html.twig' with {'transDomain': 'SystemBundle', 'header': 'system.version.system.title', 'name': config.version.current['system']} %}
<div class="container-fluid">
    {% include '@BusybeeForm/Default/flash.html.twig' with {'transDomain': 'SystemBundle'} %}
    <div class="row">
        <div class="col-sm-6">
            <div class="panel panel-{% if config.version.shouldBe['system'] == config.version.current['system'] %}success{% else %}warning{% endif %}">
                <div class="panel-heading">
                    <h3 class="panel-title">{{ 'system.version.system.title'|trans ({'%name%': config.version.current['system']}) }}</h3>
                </div>
                <div class="panel-body">
                    <p>{{ 'system.version.system.description'|trans ({'%version%': config.version.shouldBe['system']}) }}</p>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="panel panel-{% if config.version.shouldBe['database'] == config.version.current['database'] %}success{% else %}warning{% endif %}">
                <div class="panel-heading">
                    <h3 class="panel-title">{{ 'system.version.database.title'|trans ({'%version%': config.version.current['database'] }) }}</h3>
                </div>
                <div class="panel-body">
                    <p>{{ 'system.version.database.description'|trans ({'%version%': config.version.shouldBe['database']}) }}</p>
                </div>
            </div>
        </div>
        <div class="col-sm-12">
            {% if config.dbUpdate > 0 %}
                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ 'system.update.database.title'|trans }}</h3>
                    </div>
                    <div class="panel-body">
                        <p>
                            {{ miscButton({'title': 'system.update.database.button', 'transDomain': 'SystemBundle', 'class': 'btn btn-warning glyphicons glyphicons-roundabout', 'windowOpen': {'route': path('update_database')} })|raw }}

                            {% transchoice config.dbUpdate with  {'%count%': config.dbUpdate} %}
                            system.update.database.required
                            {% endtranschoice %}</p>
                        <p>{{ 'system.update.database.warning'|trans }}</p>
                    </div>
                </div>
            {% else %}
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ 'system.update.database.title'|trans }}</h3>
                    </div>
                    <div class="panel-body">
                        {{ 'system.update.database.notRequired'|trans }}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% include '@BusybeeForm/Page/panelEnd.html.twig' %}
