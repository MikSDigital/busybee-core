{% extends "BusybeeTemplateBundle:Default:template.html.twig" %}
{% trans_default_domain "SystemBundle" %}


{% form_theme form "BusybeeTemplateBundle:Template:bootstrap.html.twig"
"@BusybeeTemplate/Template/jquery.collection.html.twig"
"SystemBundle:Bundle:bundle.html.twig" %}

{% block title %}{{ 'system.bundle.manage.title'|trans }}{% endblock title %}
{% block headerTitle %}{{ 'system.bundle.manage.title'|trans }}{% endblock headerTitle %}
{% block headerLead %}{{ 'system.bundle.manage.description'|trans }}{% endblock headerLead %}

{% block stylesheets %}{{ parent() }}
    {% include "@BusybeeTemplate/Toggle/style.html.twig" %}
    <style type="text/css">
        .toggle.btn-sm {
            min-width: 40px;
            min-height: 25px;
        }

        .panel-body {
            padding: 0;
        }
    </style>
{% endblock %}

{% block contentContainer %}
    {% set h3Content = '' %}
    {% if form.vars.manager.anyUpdateRequired() %}
        {% set h3Content = h3Content ~ miscButton({class: 'btn btn-warning halflings halflings-arrow-up', title: 'bundle.update.allbutton', transDomain: 'SystemBundle', windowOpen: {route: path('bundle_update', {name: 'All'})}}) %}
    {% endif %}
    {% if form.vars.manager.SQLCount > 0 %}
        {% set h3Content = h3Content ~ miscButton({class: 'btn btn-warning halflings halflings-save', title: 'bundle.update.sqlbutton', transDomain: 'SystemBundle', windowOpen: {route: path('bundle_database_update')}}) %}{{ dump(form.vars.manager.SQLCount) }}
    {% endif %}
    {% include '@BusybeeTemplate/Page/panelStart.html.twig' with {header: 'system.bundle.manage.title'|trans, transDomain: 'SystemBundle'} %}
    {% block flashMessages %}
        {% include '@BusybeeTemplate/Default/flash.html.twig' with {transDomain: 'SystemBundle', flashClass: 'fadeAlert'} %}
    {% endblock flashMessages %}

    {{ form_start(form, {attr: {id: 'bundleForm'}}) }}
    {{ form_widget(form.bundles) }}
    {{ form_end(form) }}

    {% include '@BusybeeTemplate/Page/panelEnd.html.twig' %}
{% endblock contentContainer %}

{% block javascripts %}
    {{ parent() }}
    {% include "@BusybeeTemplate/Toggle/script.html.twig" %}
    {% include "@BusybeeTemplate/Scripts/jquery.collection.js.html.twig" %}
    <script>
        $('input:checkbox').change(function () {
            $("#bundleForm").submit();
        });
    </script>
{% endblock %}