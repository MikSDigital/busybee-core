{# src/Busybee/InstituteBundle/Resources/views/Calendar/yearCalendar.html.twig #}

{% trans_default_domain "BusybeeInstituteBundle" %}

{% extends "BusybeeHomeBundle:Default:template.html.twig" %}

{% block title %}{{ parent() }}{{ 'calendar.title'|trans }}{% endblock title %}
{% block headerTitle %}{{ 'calendar.title'|trans }}{% endblock headerTitle %}
{% block headerLead %}{{ 'calendar.description'|trans }}{% endblock headerLead %}

{% block contentContainer %}
{% set row = 1 %}
<h3 style="text-align: center; ">{{ year.name }}</h3>
{% for month in calendar.months %} 
	{% if row == 1 %}<div class="row">{% endif %}
		<div class="col-sm-3 col-md-3 calendarMonth">
			<table>
				<tr>
					<th colspan="8">
						{{ month.fullName|trans }}
					</th>
				</tr>
				<tr class="calendarWeek">
					<td><strong>{{ 'Wk'|trans }}</strong></td>
					{% for week_name in calendar.weekShortNames %}
						<td class="dayBold">
							{{ week_name|trans }}
						</td>
					{% endfor %}
				</tr>
			{% for week in month.weeks %} 
				<tr class="calendarWeek">
					<td class="dayBold">
						{{ week.number }}
					</td>
					{% for day in week.days %}
						{% set class = '' %}
						{% if day.isWeekEnd %}{% set class = 'dayBold'|trim %}{% endif %}
						{% if day.isTermBreak %}{% set class = 'termBreak'|trim %}{% endif %}
						{% if day.isClosed %}{% set class = 'isClosed'|trim %}{% set title = day.prompt %}{% endif %}
						{% if day.isSpecial %}{% set class = 'isSpecial'|trim %}{% set title = day.prompt %}{% endif %}
						{% if day.inMonth(month) %}
						<td{% if class is not empty %} class="{{ class }}"{% endif %}>
							<span{% if title is defined %} title="{{ title }}"{% endif %}>{{ day.date | date('j') }}</span>
						</td>
						{% else %}
						<td>
							&nbsp;
						</td>
						{% endif %}
					{% endfor %}
				</tr>   
			{% endfor %}
			</table>
		</div>
	{% if row == 4 %}	
		</div>
		{% set row = 0 %}
	{% endif %}
	{% set row = row + 1 %}
{% endfor %}
<div class="row">
	<div class="col-sm-2 col-md-2 termBreak">
		Term Break
	</div>
	<div class="col-sm-2 col-md-2 isClosed">
		Closed
	</div>
	<div class="col-sm-2 col-md-2 isSpecial">
		Special
	</div>
	<div class="col-sm-6 col-md-6 text-right">
		{{ 'Generated by Busybee'|trans({}, 'BusybeeHomeBundle') }}
	</div>
</div>
{% endblock contentContainer %}

