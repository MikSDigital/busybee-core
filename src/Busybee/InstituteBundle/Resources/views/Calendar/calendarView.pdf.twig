{# src/Busybee/InstituteBundle/Resources/views/Calendar/calendarView.pdf.twig #}

{% trans_default_domain "BusybeeInstituteBundle" %}


<div id="page">
	{% include 'BusybeeInstituteBundle:Calendar:style.html.twig' %}
	
	{% set row = 1 %}
	<h3 style="text-align: center; ">{{ get_setting('Org.Name') }} {{ year.name }}</h3>
	<table class="calendarBody" style="">
	<tbody>
	{% for month in calendar.months %} 
		{% if row == 1 %}<tr>
		{% endif %}
			<td class="col-sm-3 col-md-3 calendarMonth">
				<table class="monthView">
					<thead>
					<tr>
						<th colspan="8">
							{{ month.fullName|trans }}
						</th>
					</tr>
					</thead>
					<tbody class="days">
					<tr class="calendarWeek">
						<td><strong>{{ 'Wk'|trans }}</strong></td>
						{% for week_name in calendar.weekShortNames %}
							<td class="dayBold">
								{{ week_name|trans }}
							</td>
						{% endfor %}
					</tr>
				{% for week in month.weeks %} 
					<tr class="calendarWeek">
						<td class="dayBold">
							{{ week.number }}
						</td>
						{% for day in week.days %}
							{% set class = '' %}
							{% if day.isWeekEnd %}{% set class = 'dayBold'|trim %}{% endif %}
							{% if day.isTermBreak %}{% set class = 'termBreak'|trim %}{% endif %}
							{% if day.isClosed %}{% set class = 'isClosed'|trim %}{% set title = day.prompt %}{% endif %}
							{% if day.isSpecial %}{% set class = 'isSpecial'|trim %}{% set title = day.prompt %}{% endif %}
							{% if day.inMonth(month) %}
							<td{% if class is not empty %} class="{{ class }}"{% endif %}>
								<span{% if title is defined %} title="{{ title }}"{% endif %}>{{ day.date | date('j') }}</span>
							</td>
							{% else %}
							<td class="noBorder">
								&nbsp;
							</td>
							{% endif %}
						{% endfor %}
					</tr>   
				{% endfor %}
				{% if month.weeks|length < 6 %}<tr></tr>{% endif %}
				{% if month.weeks|length < 5 %}<tr></tr>{% endif %}
				</tbody>
				</table>
			</td>
		{% if row == 4 %}	
			</tr>
			{% set row = 0 %}
		{% endif %}
		{% set row = row + 1 %}
	{% endfor %}
	
	{% set row = 1 %}
	
	{% for day in year.specialDays %}
	{% if row == 1 %}<tr>{% endif %}
	<td class="dayDescription">
		{{ day.day|date('D j/M') }}: {{ day.name }}
	</td>
	{% if row == 4 %}	
	</tr>
	{% set row = 0 %}
	{% endif %}
	{% set row = row + 1 %}
	{% endfor %}
	{% if row > 1 %}</tr>{% endif %}



	<tr>
		<td class="termBreak dayDescription">
			Term Break
		</td>
		<td class="isClosed dayDescription">
			Closed
		</td>
		<td class="isSpecial dayDescription">
			Special
		</td>
		<td class="text-right dayDescription">
			{{ 'Generated by Busybee'|trans({}, 'BusybeeHomeBundle') }}
		</td>
	</tr>
	</tbody></table>


</div>
{% include 'BusybeeHomeBundle:Default:scripts.html.twig' %}
<script type="text/javascript">
	$(document).ready(function(){
		window.print();
		window.close();
	});
</script>	
