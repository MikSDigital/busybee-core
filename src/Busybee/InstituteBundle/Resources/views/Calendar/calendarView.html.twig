{# src/Busybee/InstituteBundle/Resources/views/Calendar/calendarView.html.twig #}

{% trans_default_domain "BusybeeInstituteBundle" %}

{% set row = 1 %}
<h3 style="text-align: center; ">{{ year.name }}
	{% if years|length > 0 %}
		<select name='year' id='year' style="float: left">
			{% for yearOption in years %}
				<option value="{{ yearOption.id }}"{% if yearOption.id == year.id %} selected{% endif %}>{{ yearOption.name }}</option>
			{% endfor %}
		</select>
	{% endif %}
	<button title="{{ 'calendar.year.return'|trans}}" type="button" class="halflings halflings-hand-left btn btn-primary" onClick="window.open('{{ path('calendar_years') }}','_self')" style="float: right"></button>
	<button title='{{ 'calendar.generate.print'|trans}}' type="button" class="halflings halflings-print btn btn-info" onClick="window.open('{{ path('calendar_print', {'id': year.id}) }}','_blank')" style="float: right"></button>
</h3>
{% for month in calendar.months %} 
	{% if row == 1 %}<div class="row">{% endif %}
		<div class="col-sm-3 col-md-3 calendarMonth">
			<table>
				<tr>
					<th colspan="8">
						{{ month.fullName|trans }}
					</th>
				</tr>
				<tr class="calendarWeek">
					<td><strong>{{ 'Wk'|trans }}</strong></td>
					{% for week_name in calendar.weekShortNames %}
						<td class="dayBold">
							{{ week_name|trans }}
						</td>
					{% endfor %}
				</tr>
			{% for week in month.weeks %} 
				<tr class="calendarWeek">
					<td class="dayBold">
						{{ week.number }}
					</td>
					{% for day in week.days %}
						{% set class = '' %}
						{% if day.isWeekEnd %}{% set class = 'dayBold'|trim %}{% endif %}
						{% if day.isTermBreak %}{% set class = 'termBreak'|trim %}{% endif %}
						{% if day.isClosed %}{% set class = 'isClosed'|trim %}{% set title = day.prompt %}{% endif %}
						{% if day.isSpecial %}{% set class = 'isSpecial'|trim %}{% set title = day.prompt %}{% endif %}
						{% if day.inMonth(month) %}
						<td{% if class is not empty %} class="{{ class }}"{% endif %}>
							<span{% if title is defined %} title="{{ title }}"{% endif %}>{{ day.date | date('j') }}</span>
						</td>
						{% else %}
						<td class="noBorder">
							&nbsp;
						</td>
						{% endif %}
					{% endfor %}
				</tr>   
			{% endfor %}
			</table>
		</div>
	{% if row == 4 %}	
		</div>
		{% set row = 0 %}
	{% endif %}
	{% set row = row + 1 %}
{% endfor %}

{% set row = 1 %}

{% for day in year.specialDays %}
	{% if row == 1 %}<div class="row">{% endif %}
		<div class="col-sm-3 col-md-3 calendarMonth">
			{{ day.day|date('D j/M') }}: {{ day.name }}
		</div>
	{% if row == 4 %}	
		</div>
		{% set row = 0 %}
	{% endif %}
	{% set row = row + 1 %}
{% endfor %}
{% if row > 1 %}</div>{% endif %}

<div class="row">
	<div class="col-sm-2 col-md-2 termBreak calendarMonth">
		Term Break
	</div>
	<div class="col-sm-2 col-md-2 isClosed calendarMonth">
		Closed
	</div>
	<div class="col-sm-2 col-md-2 isSpecial calendarMonth">
		Special
	</div>
	<div class="col-sm-6 col-md-6 text-right calendarMonth">
		{{ 'Generated by Busybee'|trans({}, 'BusybeeHomeBundle') }}
	</div>
</div>
