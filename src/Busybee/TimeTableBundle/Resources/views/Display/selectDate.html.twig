{% trans_default_domain "BusybeeTimeTableBundle" %}
<script type="text/javascript" language="JavaScript">
    $('#displayTimeTable').on('change', '#selectDate', function () {
        var displayDate = $('#selectDate').val();

        displayTimeTable(displayDate);
    });

    function displayTimeTable(displayDate) {

        var path = '{{ path('timetable_refresh_display', {displayDate: '__displayDate__'}) }}';
        path = path.replace('__displayDate__', displayDate);

        var htmlString = '<h3 class="text-center">{{ 'timetable.loading'|trans() }} <img height="25" src="{{ asset('img/ajax-loader.gif') }}" title="{{ 'timetable.loading'|trans() }}"></h3>';

        $('#timetableHeader').html(htmlString);

        $.ajax({
            url: path,
            type: 'POST',
            success: function (data) {
                $('#displayTimeTable').html(data['content']);
            }
        });
    }

    $(document).ready(function () {
        var displayDate = '{{ manager.timeTableDisplayDate }}';

        displayTimeTable(displayDate);
    });
</script>
