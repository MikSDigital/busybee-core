{# src/Busybee/PersonBundle/Resources/views/Person/poanelHeader.html.twig #}

{% trans_default_domain "BusybeePersonBundle" %}

{% form_theme form "BusybeeFormBundle:Template:bootstrap.html.twig" %}

{% if header is not defined %}
    {% set header = 'person.manage.title' %}
{% endif %}

<div class="panel-heading">
    <h3 class="panel-title">{{ header|trans({'%name%': form.vars.value.formatName}) }}
        {% if currentSearch == '_closeWindow' %}
            {{ closeButton()|raw }}
        {% else %}
            {{ returnButton({'title': 'person.return', 'transDomain': 'BusybeePersonBundle', 'windowOpen': {'route': path('person_manage', {'currentSearch': currentSearch})}})|raw }}
        {% endif %}
        {% if id != 'Add' %}
            {{ addButton({'title': 'person.add.title', 'transDomain': 'BusybeePersonBundle', 'windowOpen': {'route': path('person_edit', {'id': 'Add', 'currentSearch': currentSearch})}})|raw }}
		{% endif %}
        {{ resetButton({'type': 'button', 'windowOpen': {'route': path('person_edit', {'id': app.request.get('id'), 'currentSearch': currentSearch}) }})|raw }}
        {{ saveButton()|raw }}
		{% if form.dob.vars.data is not empty %}
            {% set difference = date('now').diff(date(form.dob.vars.data)) %}
			{% set years = difference.y %}
			<span class="personIdentifier">{{ 'person.label.identifier'|trans({'%identifier%': identifier}) }}<br>{{ 'person.label.age'|trans({'%years%': difference.y, '%months%': difference.m, '%days%': difference.d}) }}</span>
		{% endif %}
	</h3>
</div>
