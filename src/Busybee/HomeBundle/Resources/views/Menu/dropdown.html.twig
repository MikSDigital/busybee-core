{# src/Busybee/HomeBundle/Resources/views/Menu/dropdown.html.twig #}

{% trans_default_domain "BusybeeHomeBundle" %}

{% if (menu.role is defined and is_granted(menu.role)) or menu.role is not defined %}
	<li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" data-submenu>{{ menu.label|trans }}<span class="caret"></span></a>
		<ul class="dropdown-menu">
			{% for drop in get_menuItems(menu.menu) %}
				{% if drop.menu is defined %}
					{% include 'BusybeeHomeBundle:Menu:submenu.html.twig' with {'menu': drop} %}
				{% elseif drop.route is defined %}
					{% if (drop.role is defined and is_granted(drop.role)) or drop.role is not defined %}
					<li><a href="{{ path(drop.route, drop.parameters) }}">{{ drop.label|trans }}</a></li> 
					{% endif %}
				{% endif %}
			{% endfor %}
		</ul>
	</li>
{% endif %}
